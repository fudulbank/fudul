{% load bootstrap3 %}{% load staticfiles %}

<div class="form-group">
<form class="text-center" id="edit-question-form" action="post">
{% csrf_token %}
{% bootstrap_form form %}
</form>
</div>
<style>
.header-field{
  border-top: 1px solid #a4a4a4;
  padding-top: 7px;
  font-size: 1.2em;
  color: black;
}
</style>

<script type="text/javascript">
$(function () {
    // modify form submission behaviour to be ajaxy
    $(".radio label").addClass("radio-inline");
    $(".header-field").removeClass("form-control");
    $("div.radio").removeClass("radio").css("display", "inline");


    $("form#edit-question-form").submit(function (event) {

        /* stop form from submitting normally */
        event.preventDefault();
        var formData = new FormData($(this)[0]);

        /* Send the data */
        $.ajax({
            url: "{% url 'blocks:handle_question' subject.pk %}",
            type: 'POST',
            data: formData,
            cache: false,
            contentType: false,
            enctype: 'multipart/form-data',
            processData: false,
            success: function (data) {
                if (data.message == "success") {
                    // show success message (using toastr)
                    toastr.options.positionClass = "toast-top-left";
                    toastr.success("A question have been added");
                    window.location.href= data.show_url;

                } else {
                    $("#edit-question-modal .modal-body").html(data);
                }}
        });
    });
});

</script>