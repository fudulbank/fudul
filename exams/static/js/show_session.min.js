"use strict";window.g={},window.g.o=Object.keys(window.SESSION_QUESTIONS).map(function(o){return parseInt(o)}),window.g.i=window.g.o.map(function(o){return window.SESSION_QUESTIONS[o]}).sort(function(o,i){return o-i}),window.g.t=window.g.o.length,window.g.s=null,window.g.l=null,window.g.u=null,window.g.h=null,window.g.p=!1,window.g.m=null,-1!=window.g.i.indexOf(null)?window.g.o=window.g.o.sort(function(o,i){return window.SESSION_QUESTIONS[o]-window.SESSION_QUESTIONS[i]}):window.g.o=window.g.o.sort(function(o,i){return o-i}),showdown.setOption("headerLevelStart",3),showdown.setOption("simpleLineBreaks",!0);var w=new showdown.Converter;function t(o){o?window.g.k.addClass("marked"):window.g.k.removeClass("marked")}function d(o,i){if(window.g.v=$('#question-pool [data-question-sequence="'+o+'"]'),window.g.v.length?(i?history.replaceState({url:window.g.v.data("url")},"",window.g.v.data("url")):history.pushState({url:window.g.v.data("url")},"",window.g.v.data("url")),_paq.push(["setCustomUrl",window.location.href])):window.g.v=$('#question-pool [data-url="'+o+'"]'),window.g.v.find(".lazy").each(function(){var o=$(this),i=o.data("src"),n=o.data("img-class"),e=$('<img class="d-none '+n+'" src="'+i+'">');e.on("load",function(){o.remove(),$(this).removeClass("d-none")}),o.after(e)}),window.g.v.length){window.g.v.addClass("show"),$(".question-body").not(window.g.v).removeClass("show"),window.g.q=window.g.v.data("question-sequence"),$("#question-sequence").html(window.g.q);var n=window.g.v.data("list-revision-url");$("#question-pk").html(window.g.v.data("question-pk")).attr("href",n),_();var e=50*Math.floor(window.g.q/50),t=50*(Math.floor(window.g.q/50)+1),s=50*(Math.floor(window.g.q/50)-1),a=e-1;t>=window.g.t&&(t=null),s<0&&(s=null),i&&L(e),(i&&t&&window.g.q>=t-10||!i&&t&&window.g.q==t-10)&&L(t),(i&&null!==s&&window.g.q<=a+10||!i&&null!==s&&window.g.q==a+10)&&L(s)}else{L(50*Math.floor(o/50),o)}}function a(){var o=$(this).data("action");if(1==window.g.q&&"previous"==o)return $("#question-sequence").addClass("animated flash").css("color","yellow"),void $("#question-sequence").one(window.g._,function(){$(this).removeClass().css("color","")});if(window.g.q==window.g.t&&"next"==o)return $("#question-total").addClass("animated flash").css("color","yellow"),void $("#question-total").one(window.g._,function(){$(this).removeClass().css("color","")});if("next"==o)var i=window.g.q+1;else if("previous"==o)i=window.g.q-1;if(window.g.v=$("#question-pool [data-question-sequence="+i+"]"),!window.g.v.length)return _paq.push(["trackEvent","show_session","navigation","navigate-unloaded"]),toastr.warning("You're super fast, "+window.USER_FIRST_NAME+"!  Give us a second to bring question #"+i.toString()+"."),void $("#question-loading").addClass("animated flash").css("color","yellow");$(".check, .answer-correction-notification, .opposing-users, .supporting-users").tooltip("hide"),d(i)}function c(){$("#mark-icon").hide(),$("#mark-loading").css("display","inline-block"),$.ajax({url:Urls["exams:toggle_marked"](),type:"POST",data:{session_pk:window.SESSION_PK,question_pk:window.g.v.data("question-pk")},cache:!1,success:function(o){var i=window.g.v.data("question-pk"),n=window.g.l.indexOf(i);if(window.g.v.data("is-marked",o.is_marked),t(o.is_marked),o.is_marked?(-1==n&&window.g.l.push(i),_paq.push(["trackEvent","show_session","mark-question","add-mark"])):(-1!=n&&window.g.l.slice(n,1),_paq.push(["trackEvent","show_session","mark-question","remove-mark"])),window.g.p){var e=$('.navigate-row[data-question-sequence="'+window.g.q+'"]');o.is_marked?(e.find("td.is_marked").html(window.g.U),I()&&FontAwesome.dom.i2svg({node:document.getElementById("navigation-table")})):e.find("td.is_marked").html("")}$("#mark-icon").show(),$("#mark-loading").hide()}})}function i(){var o=$(this);if(o.is(":checked")){var i=o.closest(".question-body").find(".question-choice").not(o);o.closest("tr").find(".choice-text.strike").length&&(o.closest("tr").find(".choice-text.strike").removeClass("strike"),y()),i.prop("checked",!1)}else o.prop("checked",!1)}function r(){$(this).contents().unwrap(),y()}function l(){var o=$(this).data("text");if(3<=o.length){var i=$("<div>").text(o).html(),n=$("<span></span>").addClass("highlight").html(o).prop("outerHTML"),e=window.g.v.find(".question-text");e.html(e.html().replace(i,n)),y(),u()}}function n(o){return 3===(o=o||window.event).which||2===o.button||!1}window.g.k=$("#mark"),window.g.S=$("#submit"),window.g.P=[],window.g.A={},window.g._="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",window.g.O='<i class="far fa-check-square"></i>',window.g.U='<i class="fas fa-flag"></i>',window.g.M='<i class="fas fa-times text-danger mx-1"></i>',window.g.T=null!=navigator.userAgent.match(/iPad/i)||null!=navigator.userAgent.match(/Android/i)&&null==navigator.userAgent.match(/Mobile/i),window.g.I=null!=navigator.userAgent.match(/iPhone/i)||null!=navigator.userAgent.match(/Android/i)&&null!=navigator.userAgent.match(/Mobile/i),toastr.options.positionClass="toast-top-left",toastr.options.preventDuplicates=!0;var s={mouse:{},isVisible:!(window.onpopstate=function(o){o.state&&d(o.state.url)})};function e(o,i){var n=s.mouse.top-60,e=s.mouse.left+(i.clientX-s.mouse.left)/2,t='<p class="selection-hint"><i class="rounded py-2 fas fa-highlighter highlight-selection"></i>';o.length<=35&&(t+='<a class="d-inline-block" target="_blank" href="https://duckduckgo.com/?q='+encodeURIComponent(o)+'"><i class="rounded py-2 fas fa-globe duckduckgo"></i></a>',t+='<a class="d-inline-block" target="_blank" href="https://en.wikipedia.org/wiki/Special:Search/'+encodeURIComponent(o)+'"><i class="rounded py-2 fab fa-wikipedia-w wikipedia"></i></a>'),t+="</p>",$("body").append(t),$(".highlight-selection").data("text",o),$(".selection-hint").css({position:"absolute",top:n,left:e})}function u(){$(".selection-hint").remove(),document.getSelection().removeAllRanges()}function h(o,i){var n=$(".question-body tr"+("[data-choice-pk="+i+"]"));n.data("has-correction",!0).attr("data-has-correction","true"),n.find(".check").html('<i class="fas fa-exclamation-triangle text-warning answer-correction-notification mx-1"></i>'+o)}function initializeMnemonicInteractions(){var t=window.g.v.data("question-pk");window.g.v.find(".mnemonic").each(function(){var o=$(this);o.data("submitter-pk")==window.USER_PK&&(o.find(".like-mnemonic").attr("disabled",!0),o.find(".delete-mnemonic").removeClass("d-none"))}),window.g.v.find(".like-mnemonic").off("click").on("click",function(){var o=$(this),i=o.data("action"),n=o.closest(".mnemonic").data("mnemonic-pk"),e=Urls["exams:contribute_mnemonics"]()+"?"+$.param({question_pk:t});$.ajax({url:e,type:"POST",data:{action:i,mnemonic_pk:n},success:function(o){1==o.success?(toastr.success("Your vote was submitted."),window.g.v.find(".mnemonics-content").html(o.mnemonic_html),initializeMnemonicInteractions()):toastr.error(o.message)}})}),window.g.v.off("click",".delete-mnemonic").on("click",".delete-mnemonic",function(){var o=$(this),i=o.data("action"),n=o.closest(".mnemonic").data("mnemonic-pk"),e=Urls["exams:contribute_mnemonics"]()+"?"+$.param({question_pk:t});$.ajax({url:e,type:"POST",data:{action:i,mnemonic_pk:n},success:function(o){1==o.success?(toastr.success("Your mnemonic is deleted."),window.g.v.find(".mnemonics-content").html(o.mnemonic_html),initializeMnemonicInteractions()):toastr.error(o.message)}})})}function p(){window.g.v.off("click",".correct [data-fa-i2svg]").on("click",".correct [data-fa-i2svg]",function(){_paq.push(["trackEvent","show_session","answer_correction","click-correct"]),$("#correct-answer-modal").modal("show");var o=$(this).closest("tr").data("choice-pk"),i=Urls["exams:correct_answer"]()+"?"+$.param({choice_pk:o});$("#correct-answer-modal .modal-body").load(i)})}function f(){var o=window.g.v.find(".explanation-text").length||window.g.v.find(".explanation-figure").length||window.g.v.find(".explanation-reference-header").length,i=window.g.v.data("was-solved"),n=window.g.v.find(".explanation-container");!i||"UNEXPLAINED"==window.SESSION_MODE&&!$("body").data("has-finished")?(n.hide(),$("#explain").hide()):o?(n.show(),$("#explain").show().html('<i class="fas fa-cubes"></i> Improve this explanation!')):(n.hide(),$("#explain").show().html("Add an explanation!"))}function m(){var o=window.g.v.data("was-solved"),i=window.g.v.find(".mnemonic").length;!o||"UNEXPLAINED"==window.SESSION_MODE&&!$("body").data("has-finished")?$(".mnemonics-container, #add-mnemonics").hide():i?($("#add-mnemonics").show().html('<i class="fas fa-book"></i> Add another mnemonic!'),$(".mnemonics-container").show()):($(".mnemonics-container").hide(),$("#add-mnemonics").show().html('<i class="fas fa-book"></i> Add the first mnemonic!'))}function k(){window.g.u&&Object.keys(window.g.u).length>=window.g.t&&$("body").data("has-finished",!0).attr("data-has-finished","true")}function v(){if(!window.g.T){if($("#next").tooltip("dispose"),window.g.q==window.g.t){$("#next").css("cursor","not-allowed");var o=$("#end:visible, #results:visible").html();$("#next").tooltip({title:"This is the last question.  You can click <kbd>"+o+"</kbd> to end this session.",html:!0})}else $("#next").tooltip(),$("#next").css("cursor","pointer");1==window.g.q?$("#previous").css("cursor","not-allowed"):$("#previous").css("cursor","pointer")}}function q(){var o=$('.navigate-row[data-question-sequence="'+window.g.q+'"]');o.addClass("table-active"),$(".navigate-row").not(o).removeClass("table-active")}function b(){window.g.v.off("click",".highlight"),window.g.v.find(".choice-text").off("click"),window.g.v.find(".question-text").off("mouseup touchend")}function _(){window.g.v.find('[data-toggle="tooltip"]').tooltip(),p(),initializeMnemonicInteractions(),v(),t(window.g.v.data("is-marked")),window.g.p&&q(),$("#contributors").tooltip("dispose"),$("#contributors").off("click").click(function(){_paq.push(["trackEvent","show_session","see-contributors","see-contributors"])}),$("#contributors").tooltip({html:!0,trigger:"click",title:window.g.v.find(".tooltip-body").get(0)}),f(),m();var o=window.g.v.data("was-solved");o?($("#contribute,#add-mnemonics").show(),window.g.S.hide(),window.g.v.find(".question-choice").prop("disabled","disabled")):($("#contribute,#add-mnemonics").hide(),window.g.S.show(),window.g.v.find(".question-choice").off("change").on("change",i)),window.SESSION_IS_EXAMINABLE&&!o||!window.SESSION_IS_EXAMINABLE?window.g.v.find(".choice-text").off("click").on("click",function(){$(this).hasClass("strike")||$(this).closest("tr").find(".question-choice").prop("checked",!1).trigger("change"),$(this).toggleClass("strike"),y()}):b()}function y(){var o=window.g.v.find(".choice-text.strike").map(function(){return $(this).closest("tr").data("choice-pk")}).get();o=JSON.stringify(o);var i={best_revision_pk:window.g.v.data("best-latest-revision-pk"),highlighted_text:window.g.v.find(".question-text").html(),stricken_choice_pks:o,session_pk:window.SESSION_PK,question_pk:window.g.v.data("question-pk")};$.ajax({url:Urls["exams:submit_highlight"](),type:"POST",data:i})}function x(){if($(this).hide(),!window.g.v.data("was-solved")){if(window.g.v.data("was-solved",!0).attr("data-was-solved","true"),window.g.p)$('.navigate-row[data-question-sequence="'+window.g.q+'"]').find("td.was_solved").html(window.g.O),I()&&FontAwesome.dom.i2svg({node:document.getElementById("navigation-table")});window.g.v.find(".question-choice").prop("disabled","disabled"),f(),m(),b(),$("#contribute,#add-mnemonics").show(),window.g.v.find(".question-text, .question-choice, .choice-text").off();var o=window.g.v.find(".question-choice:checked");if(o.length){var i=o.closest("tr"),n=i.data("choice-pk");i.data("is_right")?window.g.h.correct_count+=1:window.g.h.incorrect_count+=1;var e=i.find(".answer-correction-notification"),t=i.find("button.support-correction:enabled");e.length&&t.length&&(i.find(".check").tooltip({template:'<div class="tooltip hint" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',html:!0,title:"<strong>Are you sure that this is the right answer?</strong>  Vote to support this correction! <img height='17' src='https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/1f64a.png'>",placement:"right",trigger:"manual"}).tooltip("show"),setTimeout(function(){i.find(".check").tooltip("hide")},5e3))}else{window.g.h.skipped_count+=1;n=null}T(window.SESSION_PK,window.g.h);var s=window.g.v.data("question-pk");window.g.u[s]=n,k();var a={session_pk:window.SESSION_PK,question_pk:s,choice_pk:n};$.ajax({url:Urls["exams:submit_answer"](),type:"POST",data:a,cache:!1,success:function(o){o.success?n||toastr.warning("You skipped this question"):toastr.error(o.message)}})}}function E(){var o=$("#container").height()-$("#top-info").height()-$("#top-options").height();$("#question-row").css({"padding-bottom":$("#footer").height(),"min-height":o})}function U(){$(document).keydown(function(o){if(window.g.A[o.which]=!0,window.g.A[37])$("#previous").trigger("click"),_paq.push(["trackEvent","show_session","navigation","keyboard-previous"]);else if(window.g.A[39]||window.g.A[32])o.preventDefault(),$("#next").trigger("click"),_paq.push(["trackEvent","show_session","navigation","keyboard-next"]);else if(window.g.A[18]&&window.g.A[77])_paq.push(["trackEvent","show_session","mark-question","keyboard-mark"]),window.g.k.trigger("click");else if(window.g.A[18]&&window.g.A[85]){if(_paq.push(["trackEvent","show_session","find-pending","keyboard-pending"]),"SOLVED"==window.SESSION_MODE||"INCOMPLETE"==window.SESSION_MODE)return;var i=$(".question-body[data-was-solved=false]").data("question-sequence");i?d(i):toastr.success("Yay!  No pending in this session.")}else if(window.g.A[17]&&window.g.A[13])_paq.push(["trackEvent","show_session","mark-question","keyboard-submit"]),window.g.S.trigger("click");else{if(!(window.g.A[17]&&window.g.A[38]||window.g.A[17]&&window.g.A[40]))return;o.preventDefault();var n=window.g.v.find(".question-choice").length,e=window.g.v.find(".question-choice:enabled:checked");if(e.length){var t=window.g.v.find(".question-choice").index(e);if(window.g.A[38]&&0==t)return;if(window.g.A[40]&&t==n-1)return;if(window.g.A[40]){_paq.push(["trackEvent","show_session","navigation","keyboard-down"]);var s=t+1}else if(window.g.A[38]){_paq.push(["trackEvent","show_session","navigation","keyboard-up"]);s=t-1}}else s=0;var a=window.g.v.find(".question-choice:enabled").get(s);$(a).prop("checked",!0).trigger("change")}}),$(document).keyup(function(o){delete window.g.A[o.which]})}function S(){$("#navigate-modal").modal({show:!1}),$("#open-navigation").off("click").click(function(){_paq.push(["trackEvent","show_session","navigation","open-navigation"]),$("#navigate-modal").modal("show")}),$("#navigate-modal").on("shown.bs.modal",function(){$(this).animate({scrollTop:$(".navigate-row.table-active").position().top},500)});for(var o=document.getElementById("navigation-tbody"),i="",n=1;n<=window.g.o.length;n++){var e=n-1,t=window.g.o[e],s=void 0!==window.g.u[t]?window.g.O:'<i class="far fa-square"></i>';if(window.g.l)var a=-1!=window.g.l.indexOf(t)?window.g.U:"";i+="<tr class='navigate-row text-center' data-question-sequence='"+n.toString()+"'><td>"+n.toString()+"</td><td class='d-sm-table-cell d-none'>"+t.toString()+"</td><td class='d-sm-table-cell d-none is_marked'>"+a+"</td><td class='was_solved'>"+s+"</td></tr>"}o.innerHTML=i,I()&&FontAwesome.dom.i2svg({node:document.getElementById("navigation-table")}),$("#navigation-table").find(".navigate-row").click(function(){_paq.push(["trackEvent","show_session","navigation","click-navigate-row"]),d($(this).data("question-sequence"))}),q(),window.g.p=!0}function P(){$.ajax({method:"get",url:Urls["answer-list"](),data:{format:"json",session_pk:window.SESSION_PK},success:function(o){window.g.u={},window.g.h={correct_count:0,incorrect_count:0,skipped_count:0},o.map(function(o){null===o.choice?(window.g.h.skipped_count+=1,window.g.u[o.question_id]=null):!0===o.choice.is_right?(window.g.h.correct_count+=1,window.g.u[o.question_id]=o.choice.id):!1===o.choice.is_right&&(window.g.h.incorrect_count+=1,window.g.u[o.question_id]=o.choice.id)}),C($(".question-body")),k(),T(window.SESSION_PK,window.g.h),_(),$("#open-navigation").tooltip("dispose").css("cursor","pointer").click(function(){S(),$(this).trigger("click")})}})}function A(){$.ajax({method:"get",url:Urls["marked-list"](),data:{format:"json",exam_pk:window.EXAM_PK},success:function(o){window.g.l=o.map(function(o){return o.id}),$(".question-body").each(function(){var o=$(this);Y(o,o.data("question-pk"))})}})}function O(){$.ajax({method:"get",url:Urls["highlight-list"](),data:{format:"json",session_pk:window.SESSION_PK},success:function(o){window.g.s={},o.map(function(o){window.g.s[o.revision.question_id]={revision_id:o.revision.id,highlighted_text:o.highlighted_text,stricken_choices:o.stricken_choices}}),$(".question-body").each(function(){j($(this))})}})}function M(){$.ajax({method:"get",url:Urls["exams:get_shared_session_stats"](),data:{format:"json",session_pk:window.SESSION_PK},success:function(o){if(o.success){for(var i in o.stats){var n=o.stats[i];T(n.pk,n)}$('.progress[data-has-finished="false"]').length||V()}else toastr.error(o.message)}})}function T(o,i){if(window.IS_SHARED){var n=$('.progress[data-pk="'+o+'"]');if(o!=window.SESSION_PK?n.attr("data-has-finished",i.has_finished.toString()):o==window.SESSION_PK&&"EXPLAINED"!=window.SESSION_MODE&&(i.count=i.correct_count+i.incorrect_count+i.skipped_count),"EXPLAINED"==window.SESSION_MODE){var e=Math.round(i.correct_count/window.g.t*100)+"%",t=Math.round(i.incorrect_count/window.g.t*100)+"%",s=Math.round(i.skipped_count/window.g.t*100)+"%";n.find(".progress-bar.bg-success").css("width",e).attr("aria-valuenow",i.correct_count),n.find(".progress-bar.bg-danger").css("width",t).attr("aria-valuenow",i.incorrect_count),n.find(".progress-bar.bg-warning").css("width",s).attr("aria-valuenow",i.skipped_count),$("#shared-session-"+o).tooltip({html:!0,title:'<ul class="mb-0 pl-3 sharer-name"><li>Correct: '+i.correct_count+" ("+e+")</li><li>Incorrect: "+i.incorrect_count+" ("+t+")</li><li>Skipped: "+i.skipped_count+" ("+s+")</li></ul>"})}else{var a=i.count/window.g.t*100+"%";n.find(".progress-bar.bg-success").css("width",a).attr("aria-valuenow",i.count)}}}function I(){return(-1!=navigator.userAgent.indexOf("iPhone")||-1!=navigator.userAgent.indexOf("iPad"))&&-1!=navigator.userAgent.indexOf("OS 9_")||-1!=navigator.userAgent.indexOf("Mac OS")&&-1!=navigator.userAgent.indexOf("Version/9")&&-1!=navigator.userAgent.indexOf("Safari/")}function L(e,t){if(-1==window.g.P.indexOf(e)){var s=window.g.o.slice(e,e+50),a=s.join(",");$("#question-loading").show(),$.ajax({method:"get",url:Urls["exams:list_partial_session_questions"](window.CATEGORY_SLUGS,window.EXAM_PK),data:{pks:a},success:function(o){window.g.P.push(e);var i=$(o.html);if(-1!=s.indexOf(window.g.L))var n=i.filter(function(){return $(this).data("question-pk")!=window.g.L});else n=i;C(n),$("#question-pool").append(n),$.ajax({method:"get",url:Urls["correction-list"](),data:{format:"json",exam_pk:window.EXAM_PK,question_pks:a},success:function(o){$.each(o,function(o,i){h(i.html,i.choice_id)})}}),I()&&FontAwesome.dom.i2svg({node:document.getElementById("question-pool")}),t&&d(t),$("#question-loading").hide()}})}}function j(n){if(null!==window.g.s){var o=n.data("question-pk"),e=window.g.s[o];if(void 0!==e)n.data("best-latest-revision-pk")==e.revision_id&&(e.highlighted_text&&n.find(".question-text").html(e.highlighted_text),$.each(e.stricken_choices,function(o){var i=e.stricken_choices[o];n.find("tr[data-choice-pk="+i+"] .choice-text").addClass("strike")}))}}function N(o){if(null!==window.g.u){var i=o.data("question-pk"),n=window.g.u[i];if(void 0!==n){if(o.data("was-solved",!0).attr("data-was-solved","true"),o.find(".question-choice").attr("disabled",!0),n)o.find("tr[data-choice-pk="+n+'] input[type="checkbox"]').prop("checked",!0)}else o.data("was-solved",!1).attr("data-was-solved","false");var e,t,s=o.find(".choice-table tbody"),a=s.find("tr"),d=a.length;for(a.detach();0!==d;)t=Math.floor(Math.random()*d),e=a[d-=1],a[d]=a[t],a[t]=e;s.append(a),s.removeClass("unprepared")}}function Y(o,i){-1!=window.g.l.indexOf(i)?(o.data("is-marked",!0).attr("data-is-marked","true"),o.hasClass("show")&&t(!0)):o.data("is-marked",!1).attr("data-is-marked","false")}function C(o){o.each(function(){var o=$(this),i=o.data("question-pk"),n=o.find(".question-text").html(),e=o.find(".explanation-text").html(),t=w.makeHtml(n);if(o.find(".question-text").html(t),void 0!==e){var s=w.makeHtml(e);o.find(".explanation-text").html(s)}N(o),j(o);var a=window.g.o.indexOf(i)+1;o.data("question-sequence",a).attr("data-question-sequence",a);var d=Urls["exams:list_revisions"](window.CATEGORY_SLUGS,window.EXAM_PK,i),c=Urls["exams:show_session"](window.CATEGORY_SLUGS,window.EXAM_PK,window.SESSION_PK,i);o.data("list-revision-url",d).attr("data-list-revision-url",d),o.data("url",c).attr("data-url",c),"SOLVED"!=window.SESSION_MODE&&"INCOMPLETE"!=window.SESSION_MODE||(o.data("was-solved",!0).attr("data-was-solved","true"),o.find(".question-choice").attr("disabled",!0)),window.g.l&&Y(o,i)});var i=$("#question-pool");i.hasClass("choices-were-animated")||(i.addClass("choices-were-animated"),window.g.v.find("tbody").addClass("animated fadeIn").one(window.g._,function(){$(this).removeClass()}))}function D(){!window.g.m&&document.hasFocus()&&$('.progress[data-has-finished="false"]').length&&(window.g.m=setInterval(M,5e3))}function V(){window.g.m&&(clearInterval(window.g.m),window.g.m=null)}$("#question-pool").mousedown(function(o){s.mouse.top=o.clientY+window.pageYOffset,s.mouse.left=o.clientX,!n(o)&&s.isVisible&&(u(),s.isVisible=!1)}),$("#question-pool").mouseup(function(o){if(!window.SESSION_IS_EXAMINABLE||!window.g.v.data("was-solved")){var i=window.getSelection().toString().trim();5<i.length&&!n(o)&&(e(i,o),s.isVisible=!0)}}),window.g.T&&($(".mobile-slide").removeClass("d-lg-none"),$("#question-col").removeClass("col-lg-12 px-lg-5")),(window.g.T||window.g.I)&&$("#keyboard-hint").addClass("d-none"),window.IS_SHARED&&($(window).on("focus",function(){$('.progress[data-has-finished="false"]').length&&M(),D()}),$(window).on("blur",V)),$(function(){new ClipboardJS("#share-session-copy").on("success",function(o){_paq.push(["trackEvent","show_session","share","click-copy"]),$(o.trigger).tooltip("show"),setTimeout(function(){$(o.trigger).tooltip("hide")},1e3)});var o=$(".question-body.show");window.g.L=o.data("question-pk");var i=window.g.o.indexOf(window.g.L)+1;o.attr("data-question-sequence",i).data("question-sequence",i),d(i,!0),$("#question-total").html(window.g.t),$("#question-sequence").html(i),U(),window.g.T?$('[data-toggle="tooltip"]').not("#next, #previous, #mark").tooltip():window.g.I?$('[data-toggle="tooltip"]').not(window.g.k).tooltip():$('[data-toggle="tooltip"]').tooltip();var n=$("#help-me-tooltip").get(0);$("#help-me").tooltip({html:!0,trigger:"click",title:n}),$("#help-me").click(function(){_paq.push(["trackEvent","show_session","click-get-help","click-get-help"])});var e=$("#setting-tooltip").get(0);$("#settings").tooltip({html:!0,placement:"bottom",trigger:"click",title:e}),$("#settings").click(function(){_paq.push(["trackEvent","show_session","click-settings","click-settings"])});var t=$("#share-tooltip").get(0);$("#share").tooltip({html:!0,trigger:"click",title:t}),$("#share").click(function(){$(this).removeClass("emphasized"),_paq.push(["trackEvent","show_session","share","click-share"])}),$("#theme-select").change(function(){var o=$(this).find("option:selected");$(":root").css({"--primary-background-color":o.data("primary-background-color"),"--secondary-background-color":o.data("secondary-background-color"),"--tertiary-background-color":o.data("tertiary-background-color"),"--primary-font-color":o.data("primary-font-color"),"--secondary-font-color":o.data("secondary-font-color"),"--tertiary-font-color":o.data("tertiary-font-color"),"--highlight-background":o.data("highlight-background"),"--highlight-color":o.data("highlight-color"),"--table-active":o.data("table-active"),"--table-hover":o.data("table-hover")})}),$("#save-theme").click(function(){$.ajax({url:Urls["exams:update_session_theme"](),type:"POST",data:{session_theme_pk:$("#theme-select").val()},success:function(o){o.success?($("#settings").tooltip("hide"),toastr.success("Your theme was updated!")):toastr.error(o.message)}})}),P(),O(),A(),E(),$(window).resize(E),window.IS_SHARED&&(M(),D()),$(".mobile-slide").click(function(){$(this).hasClass("previous")?($("#previous").trigger("click"),_paq.push(["trackEvent","show_session","navigation","slide-previous"])):$(this).hasClass("next")&&($("#next").trigger("click"),_paq.push(["trackEvent","show_session","navigation","slide-next"]))}),$("#end").click(function(){$("#confirm-end-modal a.submit-button").prop("href",Urls["exams:show_session_results"](window.CATEGORY_SLUGS,window.EXAM_PK,window.SESSION_PK)),$("#confirm-end-modal").modal("show")}),window.g.S.click(x),$("#previous, #next").click(a),window.g.k.click(c),$(document).on("click",".wikipedia",function(){_paq.push(["trackEvent","show_session","selection_hint","wikipedia"])}),$(document).on("click",".duckduckgo",function(){_paq.push(["trackEvent","show_session","selection_hint","duckduckgo"])}),$(document).on("click",".highlight-selection",l),$(document).on("click",".highlight",r),$(document).tooltip({selector:".answer-correction-notification",html:!0,trigger:"click",title:function(){var o=$(this).closest("td").find(".answer-correction-tooltip-body").clone(!0);return o.find('[data-toggle="tooltip"]').tooltip(),o.get(0)}}),$(document).on("show.bs.tooltip",".answer-correction-notification",function(){$(".answer-correction-notification").not(this).tooltip("hide"),_paq.push(["trackEvent","show_session","answer_correction","click-notification"])}),$(document).on("click",".delete-correction",function(){var i=$(this).data("choice-pk"),o=Urls["exams:delete_correction"]()+"?"+$.param({choice_pk:i}),n="[data-choice-pk="+i+"]",e=window.g.v.find("tr"+n);e.data("has-correction",!1).attr("data-has-correction","false"),$(".answer-correction-notification").tooltip("hide"),$(this).tooltip("hide"),$.ajax({url:o,type:"POST",success:function(o){1==o.success?(toastr.success("Your correction was removed."),o.correction_html?h(o.correction_html,i):e.find(".check").html(window.g.M)):toastr.error(o.message)}})}),$(document).on("click",".support-correction, .oppose-correction",function(){var o=$(this).data("action"),i=$(this).data("choice-pk"),n=Urls["exams:correct_answer"]()+"?"+$.param({choice_pk:i});_paq.push(["trackEvent","show_session","answer_correction","delete-notification"]),$.ajax({url:n,type:"POST",data:{action:o},success:function(o){1==o.success?(toastr.success("Your vote was submitted."),h(o.correction_html,i)):toastr.error(o.message)}})}),$("#modify-question-modal, #explain-question-modal,#add-mnemonics-modal").modal({keyboard:!1,backdrop:"static",show:!1}),$("#contribute").click(function(){$("#modify-question-modal").modal("show");var o=Urls["exams:contribute_revision"]()+"?"+$.param({question_pk:window.g.v.data("question-pk")});$("#modify-question-modal .modal-body").load(o)}),$("#explain, a.explain").click(function(){$("#explain-question-modal").modal("show");var o=Urls["exams:contribute_explanation"]()+"?"+$.param({question_pk:window.g.v.data("question-pk")});$("#explain-question-modal .modal-body").load(o)}),$("#add-mnemonics").click(function(){$("#add-mnemonics-modal").modal("show");var o=Urls["exams:contribute_mnemonics"]()+"?"+$.param({question_pk:window.g.v.data("question-pk")});$("#add-mnemonics-modal .modal-body").load(o)});var s="#explain-question-modal,#modify-question-modal,#correct-answer-modal,#add-mnemonics-modal";$(s).on("hidden.bs.modal",function(){U()}),$(s).on("show.bs.modal",function(){$(document).off("keydown keydup")})});
//# sourceMappingURL=show_session.min.js.map