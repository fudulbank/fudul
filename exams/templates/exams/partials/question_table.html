<table class="table table-striped table-bordered datatable dt-responsive">{% load account_utils %}
<thead>
    <tr>
        <th data-priority="1">ID</th>
        <th data-priority="2">Text</th>
        <th>Editor's issues</th>
        <th>Date of last latest_revision</th>
        <th data-priority="2">Actions</th>
    </tr>
</thead>
<tbody>
{% for question in questions %}
{% with latest_revision=question.get_latest_revision %}
  <tr data-pk="{{ question.pk }}" data-url="{% url 'exams:show_question' question.pk %}">
    <td class="question-id">{{ question.pk }}</td>
    <td> {{ latest_revision.text|truncatewords:20|linebreaksbr }}</td>
    <td>
      {% if question.issues.exists %}
       <ul>{% for issue in question.issues.all %}<li>{{ issue.name }}</li>{% endfor %}</ul>
      {% else %}
       None
      {% endif %}
    </td>
    <td data-order="{{ latest_revision.submission_date|date:'U' }}">{{ latest_revision.submission_date }}</td>
    <td>
      <div class="dropdown">
        <button type="button" class="btn btn-sm btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="ft-settings"></i> Actions</button>
        <div class="dropdown-menu">
          <a href="{% url 'exams:list_revisions' category_slug exam_pk question.pk %}" class="dropdown-item"><i class="ft-list"></i> History</a>
          <a href="{% url 'exams:submit_revision' category_slug exam_pk question.pk %}" class="dropdown-item"><i class="ft-edit-2"></i> Edit</a>
          <a data-pk="{{ question.pk }}" data-url="{% url 'exams:delete_question' question.pk %}" class="dropdown-item confirm-delete-question"><i class="ft-trash-2"></i> Delete</a>
        </div>
      </div>
    </td>
  </tr>
{% endwith %}
{% endfor %}
</tbody>
</table>
