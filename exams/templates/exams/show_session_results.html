{% extends 'base_new.html' %}{% load staticfiles %}

{% block title %}Fudul | Session #{{ session.pk }} results{% endblock %}

{% block head %}

<style type="text/css">
th, td{
    text-align: left;
}
tbody tr td{
    cursor:pointer;
}
tbody tr td:last-child{
    cursor:initial;
}
</style>
{% endblock %}
{% block breadcrumb %}
      <li class="breadcrumb-item"><a href="{% url 'index' %}">Fudul</a></li>
      <li class="breadcrumb-item"><a href="{% url 'exams:list_meta_categories' %}">Exams</a></li>
        {% for parent_category in session.exam.category.get_parent_categories %}
            <li class="breadcrumb-item"><a href="{% url 'exams:show_category' parent_category.get_slugs %}">{{ parent_category.name }}</a></li>
        {% endfor %}
      <li class="breadcrumb-item"><a href="{% url 'exams:show_category' session.exam.category.get_slugs %}">{{ session.exam.category.name }}</a></li>
      <li class="breadcrumb-item"><a href="{% url 'exams:list_meta_categories' %}">{{ session.exam.name }}</a></li>
      <li class="breadcrumb-item"><a href="{% url 'exams:create_session' session.exam.category.get_slugs session.exam.pk %}">{{ session.exam.name }}</a></li>
      <li class="breadcrumb-item active">Session #{{ session.pk }} results</li>
{% endblock %}
{% block content %}

<h1>Session #<a href="{% url 'exams:show_session' session.exam.category.get_slugs session.exam.pk session.pk %}">{{ session.pk }}</a> results</h1>


    <div class="card">
    <div class="card-header">
							<h5 class="card-title">Session questions</h5>
                                <a class="heading-elements-toggle"><i class="icon-more"></i></a>
{#							<div class="heading-elements">#}
{#								<ul class="icons-list">#}
{#			                		<li><a data-action="collapse"></a></li>#}
{#			                		<li><a data-action="close"></a></li>#}
{#			                	</ul>#}
{#		                	</div>#}
						</div>
        <div class="card-body">
        <div class="card-block">
        <table  style="width: 100%" class="table table-striped table-bordered datatable dt-responsive">
          <thead>
              <tr>
                <th></th>
                <th>ID</th>
                <th>Text</th>
                <th>Subjects</th>
                <th>Correct others (%)</th>
              </tr>
          </thead>
          <tbody>
          {% for answer in session.answer_set.all %}
            <tr>
              {% if not answer.choice %}<td data-order="skipped"><i title="Skipped" style="color: orange" class="fa fa-question-circle"></i>{% elif answer.choice.is_right %}<td data-order="correct"><i title="Correct" style="color: green"  class="fa fa-plus-circle "></i>{% elif not answer.choice.is_right %}<td title="Incorrect" data-order="incorrect"><i style="color: red" class="fa fa-times-circle"></i>{% endif %}</td>
              <td><a href="{% url 'exams:show_session' session.exam.category.get_slugs session.exam.pk session.pk answer.question.pk %}">{{ answer.question.pk }}</a></td>
              <td>{{ answer.question.get_latest_approved_revision.text|linebreaks|truncatewords:20 }}</td>
              <td>
                 <ul>{% for subject in answer.question.subjects.all %}<li>{{ subject.name }}</li>{% endfor %}</ul>
              </td>
              <td>{{ answer.question.get_correct_others }}%</td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
        </div>
        </div>
    </div>
{% endblock %}
{% block customscript %}
	<link rel="stylesheet" href="{% static 'css/jquery.dataTables.min.css' %}">
	<link rel="stylesheet" href="{% static 'js/datatables/responsive/css/responsive.dataTables.min.css' %}">
	<script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
  <script src="{% static 'js/datatables/responsive/js/dataTables.responsive.min.js' %}"></script>
<script>
    $(function () {
        $("table.datatable").DataTable({
            "columnDefs": [
            { "orderable": false, "targets": 2 }
          ],
            "order": [[ 1, "asc" ]]
        });
    });
</script>
{% endblock %}