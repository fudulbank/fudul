<!doctype html>{% load static static humanize %}
<html lang="en">
  <head>
    {% include 'partials/common_meta_tags.html' %}
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@FudulBank">
    <meta property="og:title" content="Fudul | We need your help">
    <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{% static 'img/logo-192x192.png' %}">
    <meta property="og:site_name" content="Fudul">
    <meta property="og:description" content="Today we need your help...">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=Karla:400,700|Dancing+Script|Tajawal&display=swap" rel="stylesheet">
		<style>
			body{
				font-family: 'Karla', sans-serif !important;
				font-size: 1.4rem;
				background: #F5F7FA;
			}
			h2{
				font-size: 3.5rem;
				font-weight: 700;
				color: white;
			}
			h3{
				font-weight: 700;
			}
			.highlight{
				background: #ffff69;
			}
			#contribution-header{
				min-height: 350px;
				background: linear-gradient(rgba(94,55,17,0.9), rgba(94,55,17,0.9)), url(https://images.unsplash.com/photo-1532928448850-d740ccdd9f9c?ixlib=rb-0.3.5&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1000&fit=max&ixid=eyJhcHBfaWQiOjQzMDIzfQ&s=fa8850e5e0b6819c2d37de038643e974) center center;
				background-size: cover;
			}
			#duration{
				width: 3em;
			}
			.footnote{
				font-size: 0.8rem;
			}

			ol {
		    list-style-type: none;
		    list-style-type: decimal !ie; /*IE 7- hack*/

		    margin: 0;
		    margin-left: 3em;
		    padding: 0;

		    counter-reset: li-counter;
			}
			ol > li{
			    position: relative;
					position: relative;
					margin: 1rem 0;
					padding-left: 1em;
			}

			ol > li:last-child{
				margin-bottom: 3rem;
			}
			ol > li:before {
			    position: absolute;
			    top: 0;
			    left: -1em;
			    width: 3.4rem;
			    height: 3.4rem;

          font-family: 'Dancing Script', cursive;
			    font-size: 3.5rem;
			    line-height: 0.94;
			    text-align: center;
			    color: #f5f5f5;

			    background-color: #464646;
					counter-increment: li-counter;
			    content: counter(li-counter);
			}
      #lang-switcher{
        font-family: 'Tajawal', sans-serif;
      }
			</style>
    <title>Fudul | We need your help</title>
    {% include 'partials/piwik.html' %}
  </head>
  <body>
		<div class="container-fluid">
			<header id="contribution-header" class="row justify-content-center">
        <div class="col-sm-2 align-self-start text-right order-md-2">
          <a id="lang-switcher" class="btn btn-sm btn-warning m-3" href="{% url 'contribute' 'ar' %}">العربية</a>
        </div>
				<div class="col-10 align-self-end order-md-1">
		      <h2 class="my-5 mt-md-0">Fudul needs you to continue.</h2>
				</div>
			</header>

			<div class="row justify-content-center">
				<div class="col-11 col-md-10 col-lg-9 col-xl-8 bg-white px-md-4 px-xl-5 py-5 my-3 rounded">
					  <div class="float-right d-none d-md-block">
							<img class="" src="{% static 'img/logo-avatar.svg' %}">
						</div>
						<h3>We built Fudul on three principles...</h3>
						<ol>
							<li>everyone must have a <span class="highlight">full and equal access to all learning resources</span>.</li>
							<li>review questions are an <span class="highlight">essential component</span> of learning resources.</li>
							<li>knowledge is better when <span class="highlight">built cooperatively</span>.</li>
						</ol>

			      <p>We believe that charging learners for access to learning resources or some "premium" features is <strong>simply wrong</strong>.</p>
			      <p>Fudul is a community of more than <span class="highlight">{{ editor_count|intcomma }} editors</span> who have helped people solve questions more than <span class="highlight">{{ answer_count|intcomma }} times</span> in more than <span class="highlight">{{ session_count|intcomma }} sessions</span>.</p>
			      <p><strong>This is huge,</strong> it has to countine.</p>
			      <p>But running Fudul now demands an increasing cost for servers to ensure that they won't fall during high-demand times.  We cannot fail our community when it needs Fudul the most.</p>

			      <hr>

						<h3 class="mt-4">And here we need your help...</h3>
						<p>You can now help us by adding funds to our hosting.  These funds will directly go to the <abbr title="WebFaction is the company that hosts Fudul">hosting company</abbr>, and will be used solely for that purpose.</p>

						<hr>

						<h3 class="mt-4">I want to contribute...</h3>

			      <p>I want to help run Fudul for <input class="d-inline-block" type="number" id="duration" min="1" value="3" max="52"> weeks.</p>
			      <p>This will ensure that Fudul will run for <span class="highlight"><span id="weeks"></span> more weeks</span> during which people are likely to submit (at least) <span class="highlight"><span id="answers"></span> answers</span>.  This will cost <span class="highlight">$<span id="cost"></span> (or <span id="riyal"></span> riyals)</span>.</p>
						<div class="text-center mb-2">
							<a id="contribute-link" class="btn btn-success btn-lg">Donate*</a>
						</div>
						<p class="footnote text-right">* You will be paying to our hosting company directly.</p>
          <div class="row justify-content-center">
            <div class="col-10 col-md-8 text-center">
              <a data-toggle="tooltip" data-title='This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.' data-html="true" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
            </div>
          </div>
				</div>
			</div>

		</div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script>
"use strict";
function randomIntFromInterval(min,max)
{
    return Math.floor(Math.random()*(max-min+1)+min);
}

const numberWithCommas = (x) => {
  return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

function isInt(value) {
  return !isNaN(value) &&
         parseInt(Number(value)) == value &&
         !isNaN(parseInt(value, 10));
}

var url = "https://www.2checkout.com/2co/buyer/purchase?sid=66208&c_prod=1&id_type=1&cart_order_id=fudul_75846&tco_currency=USD&total=";

function updateResults(){
		var duration = $("#duration").val();
		if (isInt(duration))
		{
			$("#results, #contribute-link").show()
			var cost = duration * 7; // duration is in weeks
			var riyal = cost * 3.75;
			var contrinute_url = url + cost;
      var total_answers = duration * 190000
      var formatted_answers = numberWithCommas(total_answers);
			$("#weeks").html(duration);
			$("#cost").html(cost);
			$("#riyal").html(riyal);
			$("#answers").html(formatted_answers);
			$("#contribute-link").attr("href", contrinute_url);
		} else {
			$("#results, #contribute-link").hide()
		}
}

$(function(){
  var suggestedDonation = randomIntFromInterval(2, 3);
  $("#duration").val(suggestedDonation);
	updateResults();
	$("#duration").change(updateResults);
})
		</script>
	</body>
</html>
